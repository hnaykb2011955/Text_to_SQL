<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Text to SQL</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>Text to SQL</h1>
    <form action="/query" method="post">
        <!-- Chọn Database -->
        <label for="database">Chọn Database:</label>
        <select id="database" name="database" onchange="fetchTables()">
            <!-- Danh sách database sẽ được tải động -->
        </select>
        <br>
        
        <!-- Chọn Table -->
        <label for="table">Chọn Table:</label>
        <select id="table" name="table">
            <!-- Danh sách bảng sẽ được tải động -->
        </select>
        <br>

        <!-- Nhập câu hỏi NLP -->
        <label for="query">Nhập câu hỏi NLP:</label>
        <input type="text" id="query" name="query" placeholder="Enter your NLP query" required>
        <br>
        
        <button type="submit">Convert to SQL</button>
    </form>

    <h2>English Query:</h2>
    <p>{{ query }}</p>

    <h2>Generated SQL:</h2>
    <p>{{ sql_query }}</p>

    {% if results %}
        <h2>Results:</h2>
        <table>
            <tr>
                {% for key in results[0].keys() %}
                    <th>{{ key }}</th>
                {% endfor %}
            </tr>
            {% for row in results %}
                <tr>
                    {% for value in row.values() %}
                        <td>{{ value }}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No results found.</p>
    {% endif %}

    <script src="{{ url_for('static', filename='scripts.js') }}"></script>
</body>
</html>